
R version 3.3.1 (2016-06-21) -- "Bug in Your Hair"
Copyright (C) 2016 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> suppressPackageStartupMessages(library(rgdal))
> data(state)
> xy <- cbind(state.center$x, state.center$y)
> res <- project(xy, "+proj=lcc +lat_1=48 +lat_2=33 +lon_0=-100 +ellps=GRS80")
> res1 <- project(res, "+proj=lcc +lat_1=48 +lat_2=33 +lon_0=-100 +ellps=GRS80",
+  inv=TRUE)
> stopifnot(isTRUE(all.equal(res1, xy)))
> crds <- matrix(data=c(9.05, 48.52), ncol=2)
> a <- project(crds, paste("+proj=ob_tran +o_proj=longlat",
+  "+o_lon_p=-162 +o_lat_p=39.25 +lon_0=180 +ellps=sphere +no_defs"),
+  use_ob_tran=TRUE)
> stopifnot(isTRUE(all.equal(a, matrix(c(-5.917698, -1.87195), ncol=2), tolerance=.Machine$double.eps ^ 0.25)))
> a1 <- project(a, paste("+proj=ob_tran +o_proj=longlat",
+  "+o_lon_p=-162 +o_lat_p=39.25 +lon_0=180 +ellps=sphere +no_defs"),
+  inv=TRUE, use_ob_tran=TRUE)
> stopifnot(isTRUE(all.equal(a1, crds, tolerance=.Machine$double.eps ^ 0.25)))
> states <- data.frame(state.x77, state.center)
> states <- states[states$x > -121,]
> coordinates(states) <- c("x", "y")
> proj4string(states) <- CRS("+proj=longlat +ellps=clrk66")
> state.ll83 <- spTransform(states, CRS("+proj=longlat +ellps=GRS80"))
> state.ll <- spTransform(state.ll83, CRS("+proj=longlat +ellps=clrk66"))
> stopifnot(isTRUE(all.equal(coordinates(states), coordinates(state.ll))))
> spPoint <- SpatialPoints(coords=crds,
+  proj4string=CRS("+proj=longlat +ellps=sphere +no_defs"))
> a <- spTransform(spPoint, CRS(paste("+proj=ob_tran +o_proj=longlat",
+  "+o_lon_p=-162 +o_lat_p=39.25 +lon_0=180 +ellps=sphere +no_defs")),
+  use_ob_tran=TRUE)
> stopifnot(isTRUE(all.equal(unname(coordinates(a)), matrix(c(-5.917698, -1.87195), ncol=2), tolerance=.Machine$double.eps ^ 0.25)))
> a1 <- spTransform(a, CRS("+proj=longlat +ellps=sphere +no_defs"),
+  use_ob_tran=TRUE)
> stopifnot(isTRUE(all.equal(unname(coordinates(a1)), unname(coordinates(spPoint)), tolerance=.Machine$double.eps ^ 0.25)))
> projs <- as.character(projInfo()$name)
> res <- logical(length(projs))
> names(res) <- projs
> msgs <- character(length(projs))
> names(msgs) <- projs
> for (i in seq(along=res)) {
+   iprs <- paste("+proj=", projs[i], sep="")
+   xy <- try(project(cbind(0, 0), iprs, legacy=TRUE), silent=TRUE)
+   if (class(xy) == "try-error") {
+     res[i] <- NA
+     msgs[i] <- paste("fwd:", strsplit(xy, "\n")[[1]][2])
+   } else {
+     out <- try(project(xy, iprs, inv=TRUE, legacy=TRUE), silent=TRUE)
+     if (class(out) == "try-error") {
+       res[i] <- NA
+       msgs[i] <- paste("inv:", strsplit(out, "\n")[[1]][2])
+     } else res[i] <- isTRUE(all.equal(cbind(0,0), out))
+   }
+ }
Warning messages:
1: In project(xy, iprs, inv = TRUE, legacy = TRUE) :
  1 projected point(s) not finite
2: In project(xy, iprs, inv = TRUE, legacy = TRUE) :
  1 projected point(s) not finite
3: In project(cbind(0, 0), iprs, legacy = TRUE) :
  1 projected point(s) not finite
4: In project(xy, iprs, inv = TRUE, legacy = TRUE) :
  1 projected point(s) not finite
5: In project(cbind(0, 0), iprs, legacy = TRUE) :
  1 projected point(s) not finite
> res
      aea      aeqd      airy    aitoff      alsk     apian    august     bacon 
     TRUE      TRUE        NA      TRUE     FALSE        NA        NA        NA 
     bipc     boggs     bonne   calcofi      cass        cc       cea     chamb 
     TRUE        NA        NA      TRUE      TRUE      TRUE      TRUE        NA 
    collg    comill     crast     denoy      eck1      eck2      eck3      eck4 
     TRUE      TRUE      TRUE        NA      TRUE      TRUE      TRUE      TRUE 
     eck5      eck6       eqc      eqdc     euler    etmerc     fahey      fouc 
     TRUE      TRUE      TRUE        NA        NA      TRUE      TRUE      TRUE 
   fouc_s      gall   geocent      geos     gins8   gn_sinu      gnom     goode 
     TRUE      TRUE      TRUE        NA        NA        NA      TRUE      TRUE 
     gs48      gs50    hammer    hatano   healpix  rhealpix       igh     imw_p 
    FALSE     FALSE      TRUE      TRUE      TRUE      TRUE      TRUE        NA 
     isea      kav5      kav7    krovak     labrd      laea    lagrng      larr 
       NA      TRUE      TRUE     FALSE     FALSE      TRUE        NA        NA 
     lask    lonlat    latlon   latlong   longlat       lcc      lcca      leac 
       NA      TRUE      TRUE      TRUE      TRUE      TRUE        NA      TRUE 
   lee_os     loxim      lsat     mbt_s   mbt_fps    mbtfpp    mbtfpq    mbtfps 
    FALSE      TRUE        NA      TRUE      TRUE      TRUE      TRUE      TRUE 
     merc    mil_os      mill   misrsom      moll     murd1     murd2     murd3 
     TRUE      TRUE      TRUE        NA      TRUE        NA        NA        NA 
 natearth natearth2      nell    nell_h     nicol     nsper      nzmg   ob_tran 
     TRUE      TRUE      TRUE      TRUE        NA        NA     FALSE        NA 
     ocea       oea     omerc     ortel     ortho    pconic patterson      poly 
     TRUE        NA        NA        NA      TRUE        NA      TRUE      TRUE 
    putp1     putp2     putp3    putp3p    putp4p     putp5    putp5p     putp6 
     TRUE      TRUE      TRUE      TRUE      TRUE      TRUE      TRUE      TRUE 
   putp6p   qua_aut       qsc     robin     rouss     rpoly       sch      sinu 
     TRUE      TRUE      TRUE      TRUE      TRUE        NA        NA      TRUE 
   somerc     stere    sterea   gstmerc       tcc      tcea     times    tissot 
     TRUE      TRUE      TRUE      TRUE        NA      TRUE      TRUE        NA 
    tmerc     tpeqd     tpers       ups      urm5    urmfps       utm     vandg 
     TRUE        NA        NA      TRUE        NA        NA      TRUE      TRUE 
   vandg2    vandg3    vandg4     vitk1      wag1      wag2      wag3      wag4 
       NA        NA        NA        NA      TRUE      TRUE      TRUE      TRUE 
     wag5      wag6      wag7     weren     wink1     wink2    wintri 
     TRUE      TRUE        NA      TRUE      TRUE        NA      TRUE 
> msgs
                                             aea 
                                              "" 
                                            aeqd 
                                              "" 
                                            airy 
         "inv:   No inverse for this projection" 
                                          aitoff 
                                              "" 
                                            alsk 
                                              "" 
                                           apian 
         "inv:   No inverse for this projection" 
                                          august 
         "inv:   No inverse for this projection" 
                                           bacon 
         "inv:   No inverse for this projection" 
                                            bipc 
                                              "" 
                                           boggs 
         "inv:   No inverse for this projection" 
                                           bonne 
                                       "fwd: NA" 
                                         calcofi 
                                              "" 
                                            cass 
                                              "" 
                                              cc 
                                              "" 
                                             cea 
                                              "" 
                                           chamb 
     "fwd:   no distance between control points" 
                                           collg 
                                              "" 
                                          comill 
                                              "" 
                                           crast 
                                              "" 
                                           denoy 
         "inv:   No inverse for this projection" 
                                            eck1 
                                              "" 
                                            eck2 
                                              "" 
                                            eck3 
                                              "" 
                                            eck4 
                                              "" 
                                            eck5 
                                              "" 
                                            eck6 
                                              "" 
                                             eqc 
                                              "" 
                                            eqdc 
                                       "fwd: NA" 
                                           euler 
           "fwd:   lat_1 or lat_2 not specified" 
                                          etmerc 
                                              "" 
                                           fahey 
                                              "" 
                                            fouc 
                                              "" 
                                          fouc_s 
                                              "" 
                                            gall 
                                              "" 
                                         geocent 
                                              "" 
                                            geos 
                                       "fwd: NA" 
                                           gins8 
         "inv:   No inverse for this projection" 
                                         gn_sinu 
  "fwd:   invalid projection system error (-99)" 
                                            gnom 
                                              "" 
                                           goode 
                                              "" 
                                            gs48 
                                              "" 
                                            gs50 
                                              "" 
                                          hammer 
                                              "" 
                                          hatano 
                                              "" 
                                         healpix 
                                              "" 
                                        rhealpix 
                                              "" 
                                             igh 
                                              "" 
                                           imw_p 
           "fwd:   lat_1 or lat_2 not specified" 
                                            isea 
         "inv:   No inverse for this projection" 
                                            kav5 
                                              "" 
                                            kav7 
                                              "" 
                                          krovak 
                                              "" 
                                           labrd 
                                              "" 
                                            laea 
                                              "" 
                                          lagrng 
         "inv:   No inverse for this projection" 
                                            larr 
         "inv:   No inverse for this projection" 
                                            lask 
         "inv:   No inverse for this projection" 
                                          lonlat 
                                              "" 
                                          latlon 
                                              "" 
                                         latlong 
                                              "" 
                                         longlat 
                                              "" 
                                             lcc 
                                              "" 
                                            lcca 
              "fwd:   no system list, errno: 50" 
                                            leac 
                                              "" 
                                          lee_os 
                                              "" 
                                           loxim 
                                              "" 
                                            lsat 
                  "fwd:   lsat not in 1-5 range" 
                                           mbt_s 
                                              "" 
                                         mbt_fps 
                                              "" 
                                          mbtfpp 
                                              "" 
                                          mbtfpq 
                                              "" 
                                          mbtfps 
                                              "" 
                                            merc 
                                              "" 
                                          mil_os 
                                              "" 
                                            mill 
                                              "" 
                                         misrsom 
                                       "fwd: NA" 
                                            moll 
                                              "" 
                                           murd1 
           "fwd:   lat_1 or lat_2 not specified" 
                                           murd2 
           "fwd:   lat_1 or lat_2 not specified" 
                                           murd3 
           "fwd:   lat_1 or lat_2 not specified" 
                                        natearth 
                                              "" 
                                       natearth2 
                                              "" 
                                            nell 
                                              "" 
                                          nell_h 
                                              "" 
                                           nicol 
         "inv:   No inverse for this projection" 
                                           nsper 
                                       "fwd: NA" 
                                            nzmg 
                                              "" 
                                         ob_tran 
  "fwd:   projection not selected to be rotated" 
                                            ocea 
                                              "" 
                                             oea 
      "fwd:   both n & m must be spec'd and > 0" 
                                           omerc 
     "fwd:   lat_1=lat_2 or lat_1=0 or lat_2=90" 
                                           ortel 
         "inv:   No inverse for this projection" 
                                           ortho 
                                              "" 
                                          pconic 
           "fwd:   lat_1 or lat_2 not specified" 
                                       patterson 
                                              "" 
                                            poly 
                                              "" 
                                           putp1 
                                              "" 
                                           putp2 
                                              "" 
                                           putp3 
                                              "" 
                                          putp3p 
                                              "" 
                                          putp4p 
                                              "" 
                                           putp5 
                                              "" 
                                          putp5p 
                                              "" 
                                           putp6 
                                              "" 
                                          putp6p 
                                              "" 
                                         qua_aut 
                                              "" 
                                             qsc 
                                              "" 
                                           robin 
                                              "" 
                                           rouss 
                                              "" 
                                           rpoly 
         "inv:   No inverse for this projection" 
                                             sch 
"fwd:   failed to find projection to be rotated" 
                                            sinu 
                                              "" 
                                          somerc 
                                              "" 
                                           stere 
                                              "" 
                                          sterea 
                                              "" 
                                         gstmerc 
                                              "" 
                                             tcc 
         "inv:   No inverse for this projection" 
                                            tcea 
                                              "" 
                                           times 
                                              "" 
                                          tissot 
           "fwd:   lat_1 or lat_2 not specified" 
                                           tmerc 
                                              "" 
                                           tpeqd 
     "fwd:   no distance between control points" 
                                           tpers 
                                       "fwd: NA" 
                                             ups 
                                              "" 
                                            urm5 
         "inv:   No inverse for this projection" 
                                          urmfps 
         "fwd:   n <= 0, n > 1 or not specified" 
                                             utm 
                                              "" 
                                           vandg 
                                              "" 
                                          vandg2 
         "inv:   No inverse for this projection" 
                                          vandg3 
         "inv:   No inverse for this projection" 
                                          vandg4 
         "inv:   No inverse for this projection" 
                                           vitk1 
           "fwd:   lat_1 or lat_2 not specified" 
                                            wag1 
                                              "" 
                                            wag2 
                                              "" 
                                            wag3 
                                              "" 
                                            wag4 
                                              "" 
                                            wag5 
                                              "" 
                                            wag6 
                                              "" 
                                            wag7 
         "inv:   No inverse for this projection" 
                                           weren 
                                              "" 
                                           wink1 
                                              "" 
                                           wink2 
         "inv:   No inverse for this projection" 
                                          wintri 
                                              "" 
> 
> proc.time()
   user  system elapsed 
  0.346   0.015   0.356 
